import{b as le,r as o,u as ie,c as ce,d as K,e as ue,f as de,g as fe,h as U,j as he,i as pe,k as A,l as me}from"./index-CiZN2ULJ.js";const ve="Error preloading route! ☝️";var ye=le();function ge(r,m){const a=ie(),[l,y]=o.useState(!1),v=o.useRef(!1),i=ce(m),{activeProps:g=()=>({className:"active"}),inactiveProps:B=()=>({}),activeOptions:s,to:T,preload:w,preloadDelay:O,hashScrollIntoView:V,replace:W,startTransition:$,resetScroll:G,viewTransition:J,children:M,target:f,disabled:n,style:b,className:k,onClick:P,onFocus:x,onMouseEnter:S,onMouseLeave:E,onTouchStart:R,ignoreBlocker:Q,...X}=r,{params:ke,search:Pe,hash:xe,state:Se,mask:Ee,reloadDocument:Re,...I}=X,F=o.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),Y=K({select:e=>e.location.search,structuralSharing:!0}),N=ue({select:e=>{var t;return r.from??((t=e[e.length-1])==null?void 0:t.fullPath)}}),c=o.useMemo(()=>({...r,from:N}),[r,N]),u=o.useMemo(()=>a.buildLocation(c),[a,c,Y]),h=o.useMemo(()=>c.reloadDocument?!1:w??a.options.defaultPreload,[a.options.defaultPreload,w,c.reloadDocument]),Z=O??a.options.defaultPreloadDelay??0,_=K({select:e=>{if(s!=null&&s.exact){if(!pe(e.location.pathname,u.pathname,a.basepath))return!1}else{const t=A(e.location.pathname,a.basepath).split("/");if(!A(u.pathname,a.basepath).split("/").every((oe,se)=>oe===t[se]))return!1}return((s==null?void 0:s.includeSearch)??!0)&&!me(e.location.search,u.search,{partial:!(s!=null&&s.exact),ignoreUndefined:!(s!=null&&s.explicitUndefined)})?!1:s!=null&&s.includeHash?e.location.hash===u.hash:!0}}),d=o.useCallback(()=>{a.preloadRoute(c).catch(e=>{console.warn(e),console.warn(ve)})},[c,a]),ee=o.useCallback(e=>{e!=null&&e.isIntersecting&&d()},[d]);if(de(i,ee,{rootMargin:"100px"},{disabled:!!n||h!=="viewport"}),fe(()=>{v.current||!n&&h==="render"&&(d(),v.current=!0)},[n,d,h]),F==="external")return{...I,ref:i,type:F,href:T,...M&&{children:M},...f&&{target:f},...n&&{disabled:n},...b&&{style:b},...k&&{className:k},...P&&{onClick:P},...x&&{onFocus:x},...S&&{onMouseEnter:S},...E&&{onMouseLeave:E},...R&&{onTouchStart:R}};const te=e=>{if(!n&&!be(e)&&!e.defaultPrevented&&(!f||f==="_self")&&e.button===0){e.preventDefault(),ye.flushSync(()=>{y(!0)});const t=a.subscribe("onResolved",()=>{t(),y(!1)});return a.navigate({...c,replace:W,resetScroll:G,hashScrollIntoView:V,startTransition:$,viewTransition:J,ignoreBlocker:Q})}},j=e=>{n||h&&d()},ae=j,re=e=>{if(n)return;const t=e.target||{};if(h){if(t.preloadTimeout)return;t.preloadTimeout=setTimeout(()=>{t.preloadTimeout=null,d()},Z)}},ne=e=>{if(n)return;const t=e.target||{};t.preloadTimeout&&(clearTimeout(t.preloadTimeout),t.preloadTimeout=null)},p=e=>t=>{var D;(D=t.persist)==null||D.call(t),e.filter(Boolean).forEach(H=>{t.defaultPrevented||H(t)})},L=_?U(g,{})??{}:{},C=_?{}:U(B,{}),q=[k,L.className,C.className].filter(Boolean).join(" "),z={...b,...L.style,...C.style};return{...I,...L,...C,href:n?void 0:u.maskedLocation?a.history.createHref(u.maskedLocation.href):a.history.createHref(u.href),ref:i,onClick:p([P,te]),onFocus:p([x,j]),onMouseEnter:p([S,re]),onMouseLeave:p([E,ne]),onTouchStart:p([R,ae]),disabled:!!n,target:f,...Object.keys(z).length&&{style:z},...q&&{className:q},...n&&{role:"link","aria-disabled":!0},..._&&{"data-status":"active","aria-current":"page"},...l&&{"data-transitioning":"transitioning"}}}function Le(r){return o.forwardRef(function(a,l){return he.jsx(Te,{...a,_asChild:r,ref:l})})}const Te=o.forwardRef((r,m)=>{const{_asChild:a,...l}=r,{type:y,ref:v,...i}=ge(l,m),g=typeof l.children=="function"?l.children({isActive:i["data-status"]==="active"}):l.children;return typeof a>"u"&&delete i.disabled,o.createElement(a||"a",{...i,ref:v},g)});function be(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}export{Te as L,Le as c};
